<!DOCTYPE html>
<html>
<head>
    <title>Debug Auth State</title>
</head>
<body>
    <h2>Debug Authentication State</h2>
    
    <button onclick="setCorrectAuthData()">Set Correct Auth Data</button>
    <button onclick="checkCurrentData()">Check Current Data</button>
    <button onclick="clearAuthData()">Clear Auth Data</button>
    
    <br><br>
    
    <div id="status"></div>

    <script>
        function setCorrectAuthData() {
            // The CORRECT JWT token for admin user (using proper SECRET_KEY)
            const adminToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2OGNkNzFmM2YzMWViNWQ3MmE2YzhlMjUiLCJuYW1lIjoiQWRtaW4gVXNlciIsInBoTm8iOiI3MDM2NTY3ODkwIiwiaXNWZXJpZmllZCI6dHJ1ZSwiaXNQaG9uZVZlcmlmaWVkIjp0cnVlLCJpc0VtYWlsVmVyaWZpZWQiOnRydWUsImlzQWRtaW4iOnRydWUsImlzUHJvZmlsZSI6dHJ1ZSwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicGxhdGZvcm0iOm51bGwsIl9fdiI6MCwiaWF0IjoxNzU4NTg1NjQyLCJleHAiOjE3NjExNzc2NDJ9.WNx4BmYMCCB8U2VsPVqkHow3S7OKAHo3q9N2GxwbGcA';
            
            // Admin user data - matching what the backend expects
            const adminUserData = {
                _id: '68cd71f3f31eb5d72a6c8e25',
                name: 'Admin User',
                phNo: '7036567890',
                phone: '7036567890', // Also include phone for compatibility
                email: 'user@example.com',
                isAdmin: true,
                isVerified: true,
                isPhoneVerified: true,
                isEmailVerified: true,
                isProfile: true,
                platform: null,
                __v: 0
            };
            
            // Set tokens in localStorage
            localStorage.setItem('authToken', adminToken);
            localStorage.setItem('userData', JSON.stringify(adminUserData));
            
            document.getElementById('status').innerHTML = '<p style="color: green;">‚úÖ Correct auth data set! Now reload the app.</p>';
        }
        
        function checkCurrentData() {
            const token = localStorage.getItem('authToken');
            const userData = localStorage.getItem('userData');
            
            let userDataObj = null;
            try {
                userDataObj = userData ? JSON.parse(userData) : null;
            } catch (e) {
                userDataObj = 'Invalid JSON';
            }
            
            document.getElementById('status').innerHTML = `
                <h3>Current localStorage:</h3>
                <p><strong>authToken:</strong> ${token ? token.substring(0, 50) + '...' : 'Not set'}</p>
                <p><strong>userData:</strong></p>
                <pre style="background: #f4f4f4; padding: 10px; font-size: 12px; overflow: auto;">${JSON.stringify(userDataObj, null, 2)}</pre>
                <p><strong>isAdmin:</strong> ${userDataObj?.isAdmin ? '‚úÖ true' : '‚ùå false or missing'}</p>
            `;
        }
        
        function clearAuthData() {
            localStorage.removeItem('authToken');
            localStorage.removeItem('userData');
            document.getElementById('status').innerHTML = '<p style="color: orange;">üßπ Auth data cleared!</p>';
        }
    </script>
</body>
</html>
